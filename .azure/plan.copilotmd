# Azure Deployment Plan for risk_reward_calculator Project
## **Goal**
Deploy the risk_reward_calculator Python Streamlit app to Azure App Service using Azure CLI.

## **Project Information**
**AppName**: risk_reward_calculator  
- **Stack**: Python 3.11 with Streamlit  
- **Type**: Risk-reward calculator web app  
- **Containerization**: Dockerfile present  
- **Dependencies**: None detected  
- **Hosting**: Azure App Service

## **Azure Resources Architecture**
- Single Azure App Service hosting the Streamlit application on port 8501.

## **Recommended Azure Resources**
Application risk_reward_calculator:
- Hosting Service Type: Azure App Service
- SKU: B1 (Basic tier, suitable for low-traffic web apps with 1.75 GB RAM and 1 vCPU)
- Configuration:
    - language: python
    - Environment Variables: 
      - EDGY_MODE_DEFAULT=false
      - WEBSITES_PORT=8501
- Dependencies Resource: None

## **Recommended Supporting Services**:
- Application Insights (for monitoring)
- User-Assigned Managed Identity
- Log Analytics Workspace: Connect App Service to this for logging
- Key Vault: Not required (no database dependencies)

## **Recommended Security Configurations**:
- User-Assigned Managed Identity assigned to App Service for secure access to resources

## **Execution Step**
Execution Steps:
1. Provision Azure Infrastructure with azcli:
    1. Provisioning tool: azcli. Expected files: Azure CLI scripts for provisioning.
    2. Grab current subscriptionID, use preferred regions ["eastus"] and resource types ["Microsoft.Web/sites"], ensure quota availability.
    3. Expected files do not exist, generate Azure CLI scripts for provisioning.
    4. Run Azure CLI scripts to provision the resources and confirm the result.
    5. Fix Azure CLI scripts and retry if there's any error.
2. Env setup for AzCLI:
    1. Install AZ CLI if not installed.
    2. Ensure default subscription set.
    3. Subscription ID: Use default subscription
3. Deployment:
    1. Azure App Service Deployment:
        1. Create deploy script to deploy the application with Azure CLI
        2. Output: Azure CLI scripts
    2. Deployment Validation:
        1. Check the deployed application is running.
4. Summarize Deployment Result:
    1. Use `appmod-summarize-result` tool to summarize the deployment result.
    2. Generating files: .azure/summary.copilotmd

## **Progress Tracking**
- Copilot must create and update `.azure/progress.copilotmd` after each step.  
- Progress should include:  
  - ‚úÖ Completed tasks  
  - üî≤ Pending tasks  
  - ‚ùå Failed tasks with error notes
- [ ] Provision Azure Infrastructure
- [ ] Env setup for AzCLI
- [ ] Deployment
- [ ] Summarize Deployment Result